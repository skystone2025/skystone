
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sky Stone Feed</title>
  <link rel="manifest" href="manifest.json">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
    function generateSuggestion() {
      const ph = parseFloat(document.getElementById("ph").value);
      const nh3 = parseFloat(document.getElementById("nh3").value);
      const no2 = parseFloat(document.getElementById("no2").value);
      const temp = parseFloat(document.getElementById("temp").value);
      let output = "【Sky Stone 投料建议】<br>";
      const now = new Date();
      output += "时间：" + now.toLocaleString() + "<br><br>";
      if (isNaN(ph) || isNaN(nh3) || isNaN(no2) || isNaN(temp)) {
        output += "请输入所有参数（pH、氨氮、亚硝酸盐、温度）";
        document.getElementById("result").innerHTML = output;
        return;
      }
      if (ph < 7.0) {
        const soda = Math.round((7 - ph) * 1000 / 0.2);
        output += `• 当前 pH ${ph} 偏低，建议加小苏打 ${soda} g<br>`;
      }
      if (nh3 > 1.0) {
        output += `• 氨氮 ${nh3} 偏高，建议加糖蜜 1500 g，枯草芽孢杆菌 200 g<br>`;
      }
      if (no2 > 0.1) {
        output += `• 亚硝酸盐 ${no2} 偏高，建议加维生素C 100 g<br>`;
      }
      if (temp > 32) {
        output += `• 温度 ${temp}°C 较高，建议加维生素C 100 g 增强抗应激<br>`;
      }
      if (ph < 6.8 && nh3 > 1.5) {
        output += `• 存在中度应激风险，建议泼洒食盐 5 kg 稀释毒性<br>`;
      }
      document.getElementById("result").innerHTML = output;
    }
  </script>
</head>
<body style="font-family:Arial, sans-serif; padding:20px;">
  <h2>Sky Stone 投料建议助手</h2>
  <label>pH 值：<input id="ph" type="number" step="0.01"></label><br><br>
  <label>氨氮 NH₃ (mg/L)：<input id="nh3" type="number" step="0.01"></label><br><br>
  <label>亚硝酸盐 NO₂⁻ (mg/L)：<input id="no2" type="number" step="0.01"></label><br><br>
  <label>水温 (°C)：<input id="temp" type="number" step="0.1"></label><br><br>
  <button onclick="generateSuggestion()">生成投料建议</button>
  <hr>
  <div id="result" style="line-height:1.6;"></div>
</body>
</html>
