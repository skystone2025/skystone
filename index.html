<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>Sky Stone 投料助手</title>
  <style>
    body {
      font-family: "Microsoft YaHei", sans-serif;
      padding: 20px;
      background-color: #f9f9f9;
    }
    .output {
      margin-top: 20px;
      font-size: 18px;
      padding: 10px;
      background-color: #e0f0e0;
    }
  </style>
</head>
<body>
  <h2>Sky Stone 投料助手（网页版）</h2>
  <p>当前日期时间：<span id="current-datetime"></span></p>
  <p>鱼池编号：<input type="text" id="pond-id" placeholder="例如：001" /></p>
  <p>pH 值：<input type="number" step="0.01" id="ph" /></p>
  <p>氨 NH₃ (mg/L)：<input type="number" step="0.01" id="nh3" /></p>
  <p>亚硝酸盐 NO₂ (mg/L)：<input type="number" step="0.01" id="no2" /></p>
  <button onclick="calculate()">生成投料建议</button>

  <div class="output" id="result"></div>

  <script>
    function updateDateTime() {
      const now = new Date();
      document.getElementById("current-datetime").textContent = now.toLocaleString();
    }
    setInterval(updateDateTime, 1000);
    updateDateTime();

    function calculate() {
      const ph = parseFloat(document.getElementById("ph").value);
      const nh3 = parseFloat(document.getElementById("nh3").value);
      const no2 = parseFloat(document.getElementById("no2").value);
      const pondId = document.getElementById("pond-id").value || "未知";

      let result = `鱼池编号：${pondId}\n`;
      if (isNaN(ph) || isNaN(nh3) || isNaN(no2)) {
        result += "请输入完整的水质数据。";
      } else {
        result += "投料建议：\n";
        if (ph < 6.5 || ph > 8.5) result += "→ pH 异常，检查碱度控制。\n";
        if (nh3 > 1) result += "→ 氨偏高，减少投料、增加换水。\n";
        if (no2 > 0.5) result += "→ 亚硝酸盐偏高，请添加益生菌。\n";
        if (ph >= 6.5 && ph <= 8.5 && nh3 <= 1 && no2 <= 0.5) {
          result += "→ 水质良好，维持现有管理。";
        }
      }

      document.getElementById("result").textContent = result;
    }
  </script>
</body>
</html>
